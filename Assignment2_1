#include <iostream>
#include <string>
using namespace std;

class Node
{
public:
    string content;
    Node *next;

    Node()
    {
        next = NULL;
    }
};

class stack
{
public:
    Node *top;

    stack()
    {
        top = NULL;
    }

    bool IsEmpty()
    {
        return top == NULL;
    }

    void push(string value)
    {
        Node *New = new Node;
        New->content = value;
        New->next = top;
        top = New;
    }

    string pop()
    {
        if (IsEmpty())
        {
            return "";
        }
        Node *temp = top;
        string val = temp->content;
        top = top->next;
        delete temp;
        return val;
    }

    string peek()
    {
        if (IsEmpty())
        {
            return "";
        }
        else
        {
            return top->content;
        }
    }

    void clear()
    {
        while (!IsEmpty())
        {
            pop();
        }
    }
};

class Texteditor
{
public:
    stack undocontent;
    stack redocontent;
    string text = "";

    void type(string content)
    {
        undocontent.push(content);
        if (!text.empty())
            text += " ";
        text += content;
        redocontent.clear();
    }

    void undo()
    {
        if (!undocontent.IsEmpty())
        {
            string last = undocontent.pop();
            redocontent.push(last);
            if (text.size() >= last.size())
            {
                if (text.size() > last.size() && text[text.size() - last.size() - 1] == ' ')
                    text.erase(text.size() - last.size() - 1);
                else
                    text.erase(text.size() - last.size());
            }
        }
        else
        {
            cout << "Nothing to undo!" << endl;
        }
    }

    void redo()
    {
        if (!redocontent.IsEmpty())
        {
            string last = redocontent.pop();
            undocontent.push(last);
            if (!text.empty())
                text += " ";
            text += last;
        }
        else
        {
            cout << "Nothing to redo" << endl;
        }
    }

    void show()
    {
        cout << "\nCurrent text : " << text << endl;
    }
};

int main()
{
    Texteditor editor;
    int choice;
    string word;

    do
    {
        cout << "\n--- Text Editor Menu ---";
        cout << "\n1. Type Text";
        cout << "\n2. Undo";
        cout << "\n3. Redo";
        cout << "\n4. Show Text";
        cout << "\n5. Exit";
        cout << "\nEnter choice: ";
        cin >> choice;
        cin.ignore();

        switch (choice)
        {
        case 1:
            cout << "Enter text: ";
            getline(cin, word);
            editor.type(word);
            break;

        case 2:
            editor.undo();
            break;

        case 3:
            editor.redo();
            break;

        case 4:
            editor.show();
            break;

        case 5:
            cout << "Exiting program...." << endl;
            break;

        default:
            cout << "Invalid choice" << endl;
        }
    } while (choice != 5);

    return 0;
}
